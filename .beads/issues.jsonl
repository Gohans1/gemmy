{"id":"gemmy-0dw","title":"Fix Focus Mode menu visibility and auto-play","description":"1. Menu music selection is visible in Normal Mode (missing CSS for hidden container). 2. Ensure auto-play triggers correctly on Focus Mode entry for the first track.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T02:49:24.1515754+07:00","updated_at":"2025-12-17T02:50:39.6685482+07:00","closed_at":"2025-12-17T02:50:39.6685482+07:00","close_reason":"Updated styles.css to properly hide .gemmy-focus-controls-container.hidden. Verified main.ts auto-play logic is correct."}
{"id":"gemmy-0f6","title":"Fix Focus Mode Button Styles","description":"Focus mode buttons have inconsistent background/borders compared to normal mode. Align styles to be transparent by default and only show on hover.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T00:36:36.8869599+07:00","updated_at":"2025-12-17T00:37:18.8791578+07:00","closed_at":"2025-12-17T00:37:18.8791578+07:00","close_reason":"Fixed focus mode button styles to match normal mode by removing default background and applying it only on hover."}
{"id":"gemmy-0i5","title":"Implement retry logic for YouTube auto-play","description":"Replace single-shot timeout with a retry loop (3s duration, 500ms interval) to send playVideo commands repeatedly until the YouTube player is ready.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T03:01:04.6214328+07:00","updated_at":"2025-12-17T03:01:16.7903516+07:00","closed_at":"2025-12-17T03:01:16.7903516+07:00","close_reason":"Implemented retry loop (3s duration, 500ms interval) in playFocusMusic to ensure play command reaches the player."}
{"id":"gemmy-0ly","title":"Phase 1: UI/UX \u0026 QoL Enhancements","description":"This Epic encompasses the first major enhancement phase for Gemmy, aiming to transform the plugin from a basic proof-of-concept into a polished, native-feeling Obsidian tool. We focus on visual feedback (animations), content richness (markdown), and interaction quality (smooth dragging and native tooltips).","design":"The approach involves leveraging Obsidian's internal APIs (MarkdownRenderer, setTooltip, activeDocument) to ensure high performance and consistency with the rest of the app. Animations will be CSS-driven for smoothness.","acceptance_criteria":"- [ ] Markdown rendering works in all modes (Normal, Fav, Focus)\n- [ ] All UI tooltips are native and consistent\n- [ ] Mascot dragging is robust across all screen areas\n- [ ] Visual feedback (bounce) is present during interactions","notes":"Epic started. Plan Agent has structured all subtasks. Phase 1 execution beginning.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-19T01:39:39.5813415+07:00","updated_at":"2025-12-19T01:44:34.9587443+07:00","closed_at":"2025-12-19T01:44:34.9587443+07:00","close_reason":"Phase 1 Epic completed. All UI/UX and QoL enhancements are now integrated."}
{"id":"gemmy-0yl","title":"Move Tooltips Below Buttons","description":"User requested tooltips to appear below buttons instead of above to avoid obscuring content. Update CSS positioning.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T00:53:15.2623964+07:00","updated_at":"2025-12-17T00:53:30.1310932+07:00","closed_at":"2025-12-17T00:53:30.1310932+07:00","close_reason":"Moved tooltips below buttons by changing bottom: 100% to top: 100% and updating margins in styles.css."}
{"id":"gemmy-0zb","title":"Task: Thêm hiệu ứng CSS Animations","description":"Thêm các hiệu ứng chuyển động cho Gemmy và bong bóng chat để tăng tính sinh động.","design":"1. Định nghĩa các @keyframes trong styles.css (gemmy-pop, gemmy-fade).\\n2. Thêm các class animation vào gemmyEl và chatBubbleEl khi xuất hiện/biến mất.\\n3. Điều chỉnh timing CSS để animation mượt mà.","acceptance_criteria":"- [ ] Gemmy xuất hiện với hiệu ứng 'pop' sinh động.\\n- [ ] Bong bóng chat mờ dần (fade) khi biến mất thay vì biến mất tức thì.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T15:32:53.6558535+07:00","updated_at":"2025-12-18T15:42:20.4285478+07:00","closed_at":"2025-12-18T15:42:20.4285478+07:00","close_reason":"Đã thêm hiệu ứng pop-in cho Gemmy và hiệu ứng fade-in/fade-out cho bong bóng chat.","dependencies":[{"issue_id":"gemmy-0zb","depends_on_id":"gemmy-9ef","type":"parent-child","created_at":"2025-12-18T15:33:03.615105+07:00","created_by":"daemon"}]}
{"id":"gemmy-16l","title":"Optimize DataManager writes","description":"Refactor DataManager to avoid O(n) writes on every change. Implement debouncing or more efficient data structures.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T23:06:51.9351719+07:00","updated_at":"2025-12-15T23:24:51.0888635+07:00","closed_at":"2025-12-15T23:24:51.0888635+07:00","close_reason":"Completed as part of refactoring (duplicates of worked issues)","dependencies":[{"issue_id":"gemmy-16l","depends_on_id":"gemmy-2z6","type":"parent-child","created_at":"2025-12-15T23:07:28.969054+07:00","created_by":"daemon"},{"issue_id":"gemmy-16l","depends_on_id":"gemmy-7ok","type":"blocks","created_at":"2025-12-15T23:09:13.756114+07:00","created_by":"daemon"}]}
{"id":"gemmy-18t","title":"Refactor Settings Data Model","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T23:25:07.3511124+07:00","updated_at":"2025-12-16T23:26:03.3548752+07:00","closed_at":"2025-12-16T23:26:03.3548752+07:00","close_reason":"Updated types and constants with new data model","dependencies":[{"issue_id":"gemmy-18t","depends_on_id":"gemmy-bav","type":"parent-child","created_at":"2025-12-16T23:25:07.3521515+07:00","created_by":"daemon"}]}
{"id":"gemmy-1dh","title":"Refactor: Architecture Overhaul","description":"Tái cấu trúc toàn bộ dự án Gemmy để thoát khỏi tình trạng God Class (main.ts) và tuân thủ chặt chẽ rule 3-mode-riêng-biệt. Mục tiêu là chia nhỏ code thành các Manager riêng biệt, dễ bảo trì và mở rộng.","design":"Tạo thư mục src/modes/. Tách code thành FocusManager, QuoteManager. Làm sạch UI/CSS.","acceptance_criteria":"- Main.ts dưới 200 dòng code.\\n- src/modes/FocusManager.ts chứa toàn bộ logic Focus.\\n- src/modes/QuoteManager.ts chứa toàn bộ logic Quote/Favorite.\\n- Không còn inline style trong TS.\\n- Setting nằm đúng nút bấm của mode tương ứng.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-17T14:43:26.74793+07:00","updated_at":"2025-12-18T00:12:23.1593307+07:00","closed_at":"2025-12-18T00:12:23.1593307+07:00","close_reason":"All subtasks completed. Architecture successfully refactored into FocusManager and QuoteManager. Inline styles removed."}
{"id":"gemmy-1dh.1","title":"Refactor: Inline Styles to CSS Classes","description":"Tìm tất cả các dòng code trong main.ts đang sử dụng .style.xxx = '...'. Ví dụ: focusControlsContainer.style.display = 'flex', focusControlsContainer.style.gap = '5px'. Thay thế logic trong main.ts thành .addClass('...').","design":"1. Audit toàn bộ file main.ts tìm .style usage.\\n2. Tạo file styles.css (nếu chưa có thì tạo, nếu có thì thêm class).\\n3. Định nghĩa các class CSS như .gemmy-focus-controls, .gemmy-hidden-music, v.v.\\n4. Replace code TS để dùng addClass/removeClass.","acceptance_criteria":"- Không còn dòng code .style.xxx nào trong main.ts ngoại trừ các style động (tọa độ drag/drop).\\n- Giao diện hiển thị y hệt như cũ, không vỡ layout.\\n- Các class CSS được đặt tên rõ ràng, có prefix gemmy-.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T14:43:37.6051068+07:00","updated_at":"2025-12-18T00:12:07.3304867+07:00","closed_at":"2025-12-18T00:12:07.3304867+07:00","close_reason":"Refactored inline styles to CSS classes. UI remains consistent.","dependencies":[{"issue_id":"gemmy-1dh.1","depends_on_id":"gemmy-1dh","type":"parent-child","created_at":"2025-12-17T14:43:37.6061431+07:00","created_by":"daemon"},{"issue_id":"gemmy-1dh.1","depends_on_id":"gemmy-1dh.2","type":"blocks","created_at":"2025-12-17T14:45:02.7770365+07:00","created_by":"daemon"},{"issue_id":"gemmy-1dh.1","depends_on_id":"gemmy-1dh.3","type":"blocks","created_at":"2025-12-17T14:45:11.6869958+07:00","created_by":"daemon"}]}
{"id":"gemmy-1dh.2","title":"Extract: FocusManager (Focus Mode)","description":"Tách toàn bộ logic liên quan đến Focus Mode (Timer, Music, Focus UI) ra khỏi main.ts.","design":"1. Tạo file src/modes/FocusManager.ts.\\n2. Move variables: timerInterval, pomodoroTimeLeft, isPlayingMusic, currentMusicId, isTimerRunning, isTimerPaused, focusVolumeSliderEl, musicSelectEl, playPauseButtonEl, focusSettingsButtonEl.\\n3. Move methods: toggleFocusMode (logic), renderFocusUI, startPomodoro, stopPomodoro, playFocusMusic, toggleMusicPlayback, setMusicVolume, sendYouTubeCommand.\\n4. FocusManager nhận plugin instance trong constructor.","acceptance_criteria":"- File main.ts không còn chứa logic Timer hay Music.\\n- Focus Mode hoạt động bình thường (đếm ngược, play nhạc, pause nhạc).\\n- Code clean, có type đầy đủ.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T14:43:50.2221231+07:00","updated_at":"2025-12-17T23:58:19.5598749+07:00","closed_at":"2025-12-17T23:58:19.5598749+07:00","close_reason":"Refactored FocusManager successfully. Syntax error fixed.","dependencies":[{"issue_id":"gemmy-1dh.2","depends_on_id":"gemmy-1dh","type":"parent-child","created_at":"2025-12-17T14:43:50.2237676+07:00","created_by":"daemon"}]}
{"id":"gemmy-1dh.3","title":"Extract: QuoteManager (Normal/Fav Mode)","description":"Tách toàn bộ logic liên quan đến Normal Mode và Favourite Mode (Quote, History, Favorite) ra khỏi main.ts.","design":"1. Tạo file src/modes/QuoteManager.ts.\\n2. Move variables: isFavouriteMode, quoteHistory, historyIndex, bubbleTimeout, idleIntervalId.\\n3. Move methods: toggleFavMode, toggleFavorite, showPrevQuote, showNextQuote, saySomething, resetIdleInterval.\\n4. Đảm bảo main.ts chỉ gọi các method public của Manager.","acceptance_criteria":"- File main.ts sạch sẽ, chỉ còn logic khởi tạo và gọi Manager.\\n- Chuyển mode Normal/Favourite hoạt động đúng.\\n- Idle talk vẫn hoạt động.\\n- Favorite hoạt động đúng (add/remove).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T14:44:14.4431623+07:00","updated_at":"2025-12-18T00:06:35.4022496+07:00","closed_at":"2025-12-18T00:06:35.4022496+07:00","close_reason":"Extracted QuoteManager logic. main.ts is now clean.","dependencies":[{"issue_id":"gemmy-1dh.3","depends_on_id":"gemmy-1dh","type":"parent-child","created_at":"2025-12-17T14:44:14.4468074+07:00","created_by":"daemon"},{"issue_id":"gemmy-1dh.3","depends_on_id":"gemmy-1dh.4","type":"blocks","created_at":"2025-12-17T14:45:16.1996651+07:00","created_by":"daemon"}]}
{"id":"gemmy-1dh.4","title":"Migrate: Settings to In-App UI","description":"Di chuyển setting 'Idle Frequency' từ Obsidian Setting Tab về UI của Normal Mode (nút Setting riêng) để tuân thủ rule dự án.","design":"1. Tạo file modal cho settings nếu cần (hoặc reuse ChangeFrequencyModal).\\n2. Trong QuoteManager (hoặc UI code), thêm nút 'Settings' (icon bánh răng) vào hàng nút của Normal Mode.\\n3. Xóa code trong GemmySettingTab (settings.ts) hoặc để trống thông báo.\\n4. Đảm bảo user bấm nút bánh răng ở Normal Mode thì chỉnh được Idle Frequency.","acceptance_criteria":"- Không còn setting Normal Mode nào nằm trong Obsidian Settings Tab.\\n- Nút Settings mới hoạt động, mở đúng modal.\\n- Setting được lưu và áp dụng ngay lập tức.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-17T14:44:26.1626056+07:00","updated_at":"2025-12-18T00:04:51.1221169+07:00","closed_at":"2025-12-18T00:04:51.1221169+07:00","close_reason":"Implemented settings button in UI, hidden in focus mode, and removed from main settings tab.","dependencies":[{"issue_id":"gemmy-1dh.4","depends_on_id":"gemmy-1dh","type":"parent-child","created_at":"2025-12-17T14:44:26.1636035+07:00","created_by":"daemon"}]}
{"id":"gemmy-1gp","title":"Update quote history limit to 1000","description":"Increase the quote history buffer from 5 to 1000 in src/main.ts. This allows users to navigate back through practically 'infinite' history without performance impact.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T11:15:03.6495038+07:00","updated_at":"2025-12-17T11:15:31.420781+07:00","closed_at":"2025-12-17T11:15:31.420781+07:00","close_reason":"Updated src/main.ts to increase history limit from 5 to 1000"}
{"id":"gemmy-1hd","title":"Hide all buttons in Focus Mode except Toggle","description":"In Focus Mode, hide all UI buttons (Next, Prev, Menu, Favorite, etc.) except for the Focus Mode toggle button. Ensure they do not appear on hover.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T16:00:45.3408596+07:00","updated_at":"2025-12-16T16:01:11.2606046+07:00","closed_at":"2025-12-16T16:01:11.2606046+07:00","close_reason":"Implemented CSS hiding rules and JS class toggling for Focus Mode"}
{"id":"gemmy-1q5","title":"Remove Playlist Functionality","description":"Remove all playlist related code (types, UI, logic) from the project as per user request. Keep Random button but limit it to Tracks only.","status":"closed","priority":0,"issue_type":"chore","created_at":"2025-12-18T03:03:22.5809054+07:00","updated_at":"2025-12-18T03:14:59.5719009+07:00","closed_at":"2025-12-18T03:14:59.5719009+07:00","close_reason":"Removed all playlist logic from types, constants, FocusManager, and modals. The Random button now selects only from Tracks."}
{"id":"gemmy-1r0","title":"Fix Focus Mode Logic (Timer \u0026 Quotes)","description":"Fix Timer disappearing bug. Ensure Quotes are hidden when Focus Mode is active.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T23:57:50.3537419+07:00","updated_at":"2025-12-17T00:02:16.1744713+07:00","closed_at":"2025-12-17T00:02:16.1744713+07:00","close_reason":"Duplicate tasks created due to ID error"}
{"id":"gemmy-27e","title":"Implement Focus UI v2 (Timer \u0026 Menu)","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T23:51:33.8326949+07:00","updated_at":"2025-12-16T23:51:42.1807202+07:00","closed_at":"2025-12-16T23:51:42.1807202+07:00","close_reason":"Completed code implementation and fixed syntax error","dependencies":[{"issue_id":"gemmy-27e","depends_on_id":"gemmy-3tw","type":"parent-child","created_at":"2025-12-16T23:51:33.8337577+07:00","created_by":"daemon"}]}
{"id":"gemmy-2pi","title":"Fix Timer UI (MM:SS) \u0026 Connect Modal","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T23:46:34.2853625+07:00","updated_at":"2025-12-17T00:02:16.1788942+07:00","closed_at":"2025-12-17T00:02:16.1788942+07:00","close_reason":"Duplicate tasks created due to ID error"}
{"id":"gemmy-2sz","title":"Implement MusicSelectionModal","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T23:39:23.5420293+07:00","updated_at":"2025-12-16T23:46:18.4519095+07:00","closed_at":"2025-12-16T23:46:18.4519095+07:00","close_reason":"Superseded by user request for centralized UI"}
{"id":"gemmy-2z6","title":"Refactor and Optimize Gemmy Plugin","description":"Comprehensive overhaul to fix architectural flaws, performance bottlenecks, and code quality issues.","acceptance_criteria":"- [ ] Codebase moved to src/ directory\\n- [ ] DataManager writes are optimized (no O(n) writes)\\n- [ ] main.ts is decomposed into smaller modules\\n- [ ] Modals use shared base class","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-15T22:53:03.9129799+07:00","updated_at":"2025-12-15T23:24:54.4565074+07:00","closed_at":"2025-12-15T23:24:54.4565074+07:00","close_reason":"All criteria met: codebase moved to src/, writes optimized, main.ts decomposed, modals refactored"}
{"id":"gemmy-33e","title":"Focus Mode: Update timer format to mm:ss","description":"Allow user input for seconds. Default to 00 if not provided. Format: mm:ss.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T11:39:51.8559481+07:00","updated_at":"2025-12-17T11:45:34.6487767+07:00","closed_at":"2025-12-17T11:45:34.6487767+07:00","close_reason":"Updated timer format to mm:ss"}
{"id":"gemmy-3tw","title":"Centralize Focus UI \u0026 Fix Timer","description":"","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-16T23:46:32.8249105+07:00","updated_at":"2025-12-16T23:51:42.1829097+07:00","closed_at":"2025-12-16T23:51:42.1829097+07:00","close_reason":"Completed code implementation and fixed syntax error"}
{"id":"gemmy-44m","title":"Implement Settings Playlist Manager","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T23:25:07.9772485+07:00","updated_at":"2025-12-16T23:26:43.6307439+07:00","closed_at":"2025-12-16T23:26:43.6307439+07:00","close_reason":"Implemented Playlist Manager in Settings Tab","dependencies":[{"issue_id":"gemmy-44m","depends_on_id":"gemmy-bav","type":"parent-child","created_at":"2025-12-16T23:25:07.9782871+07:00","created_by":"daemon"}]}
{"id":"gemmy-4ia","title":"Fix FocusSettingsModal Inputs","description":"Ensure inputs for Name and Youtube URL are visible and functional in the modal.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T23:57:49.8435716+07:00","updated_at":"2025-12-17T00:02:16.1766491+07:00","closed_at":"2025-12-17T00:02:16.1766491+07:00","close_reason":"Duplicate tasks created due to ID error"}
{"id":"gemmy-4om","title":"Refine Timer Control UI","description":"Add Play/Pause button immediately next to the countdown timer.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T23:57:50.8399922+07:00","updated_at":"2025-12-17T00:02:16.1683977+07:00","closed_at":"2025-12-17T00:02:16.1683977+07:00","close_reason":"Duplicate tasks created due to ID error"}
{"id":"gemmy-4pg","title":"Epic: Advanced Music \u0026 Interaction Enhancements","description":"Epic này bao gồm việc triển khai các tính năng phát nhạc nâng cao (thanh tua, phát đoạn 35s ngẫu nhiên) và cải thiện tương tác người dùng (lệnh Toggle Gemmy).","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-19T21:42:39.6758813+07:00","updated_at":"2025-12-19T21:54:06.419727+07:00","closed_at":"2025-12-19T21:54:06.419727+07:00","close_reason":"Implemented Toggle Gemmy command, Music Seek Bar, and Random 35s Segment Radio logic. All features are integrated and styled."}
{"id":"gemmy-4t3","title":"Update README.md with new features","description":"Document the newly added features (Favorites, Import/Export, Menu) in the README.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T20:30:52.4803842+07:00","updated_at":"2025-12-15T20:31:21.9015985+07:00","closed_at":"2025-12-15T20:31:21.9015985+07:00","close_reason":"Added 'Accidental Features' section to README documenting Favorites, Import/Export, and Menu."}
{"id":"gemmy-4zu","title":"Replace Custom Tooltips with Native Obsidian Tooltips","description":"Current tooltips are implemented via a custom CSS data-tooltip attribute. This is non-standard and lacks the refined feel and accessibility of Obsidian's built-in tooltips. We need to transition all UI elements to use the official API.","design":"Replace all instances of setAttribute('data-tooltip', ...) with setTooltip(element, text). This applies to main.ts (Toggle, Favorite, Menu, Prev, Next buttons) and FocusManager.ts (Play, Pause, Random, Settings, Focus buttons). Simultaneously, clean up styles.css to remove the obsolete ::after tooltip selectors.","acceptance_criteria":"- [ ] Hovering over any Gemmy button shows an Obsidian-styled tooltip\n- [ ] No residual custom tooltip CSS exists in the final build\n- [ ] Tooltips reflect the correct state (e.g., 'Switch to Fav Mode' vs 'Switch to Normal Mode')","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T01:39:40.5935857+07:00","updated_at":"2025-12-19T01:44:34.4647947+07:00","closed_at":"2025-12-19T01:44:34.4647947+07:00","close_reason":"Successfully implemented Phase 1 tasks: Markdown rendering, mascot bounce animation, improved draggable logic, and native tooltips.","dependencies":[{"issue_id":"gemmy-4zu","depends_on_id":"gemmy-0ly","type":"parent-child","created_at":"2025-12-19T01:39:46.7677714+07:00","created_by":"daemon"}]}
{"id":"gemmy-50f","title":"Fix typo in renderFocusUI causing crash","description":"Rename 'rendFocusUI' to 'renderFocusUI' in src/main.ts. The typo causes a runtime error in toggleFocusMode, preventing the timer UI from rendering and blocking the subsequent auto-play logic.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-17T03:08:21.1737105+07:00","updated_at":"2025-12-17T03:08:28.9372044+07:00","closed_at":"2025-12-17T03:08:28.9372044+07:00","close_reason":"Renamed rendFocusUI to renderFocusUI. This fixes the runtime error that prevented the timer from appearing and stopped the auto-play logic from executing."}
{"id":"gemmy-57x","title":"Fix Next button navigation logic","description":"Change Next button behavior: If browsing history (index \u003e 0), move forward in history. Only generate new quote if at the latest quote (index == 0).","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-15T16:05:28.8641102+07:00","updated_at":"2025-12-15T16:06:50.6618798+07:00","closed_at":"2025-12-15T16:06:50.6618798+07:00","close_reason":"Implemented logic to navigate forward in history before generating new quote."}
{"id":"gemmy-5dy","title":"Fix Focus Mode Logic (Timer \u0026 Quotes)","description":"Fix Timer disappearing bug and prevent Quotes from appearing in Focus Mode.","notes":"BUG 1: Timer text missing in Focus Mode. Fix renderFocusUI() in src/main.ts. BUG 2: Quotes appearing in Focus Mode. Add strict 'if (this.isFocusMode) return;' check in saySomething().","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T23:58:06.3195801+07:00","updated_at":"2025-12-17T00:12:57.8498864+07:00","closed_at":"2025-12-17T00:12:57.8498864+07:00","close_reason":"Fixed typo in renderFocusUI and enforced strict focus mode check in saySomething.","dependencies":[{"issue_id":"gemmy-5dy","depends_on_id":"gemmy-l8v","type":"parent-child","created_at":"2025-12-16T23:58:06.3195801+07:00","created_by":"daemon"}]}
{"id":"gemmy-610","title":"Fix Focus Mode auto-play reliability","description":"Music does not start immediately when switching to Focus Mode. Investigate iframe loading, autoplay policies, and logic order in toggleFocusMode.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T02:54:44.0609198+07:00","updated_at":"2025-12-17T02:55:19.9036875+07:00","closed_at":"2025-12-17T02:55:19.9036875+07:00","close_reason":"Reduced iframe onload timeout from 1500ms to 500ms to improve responsiveness. This should make the music start noticeably faster."}
{"id":"gemmy-6bs","title":"Add file picker for avatar selection","description":"Improve UX by adding a file picker button in the Change Avatar modal. This allows users to select a local image file instead of typing the path manually. Retrieve the file path from the file input and populate the setting field.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-15T23:59:13.6214097+07:00","updated_at":"2025-12-16T00:00:10.2311076+07:00","closed_at":"2025-12-16T00:00:10.2311076+07:00","close_reason":"Added file picker button using input type=file, retrieving absolute path via File.path property"}
{"id":"gemmy-6eb","title":"Add Import/Export Quotes functionality","description":"Implement import and export of quotes to/from JSON. Add menu items for these actions.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-15T20:00:35.3403512+07:00","updated_at":"2025-12-15T20:01:30.7362717+07:00","closed_at":"2025-12-15T20:01:30.7362717+07:00","close_reason":"Implemented Import/Export functionality and cleaned up UI"}
{"id":"gemmy-6hd","title":"Optimize DataManager persistence and error handling","description":"Currently rewrites entire JSON on every change. Missing error handling.","design":"Implement debounce for saves. Add try/catch blocks around file I/O. Use Set for fast lookups.","acceptance_criteria":"- [ ] Saving data does not freeze UI\\n- [ ] File I/O errors are logged\\n- [ ] Quotes lookups are O(1)","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-15T22:53:18.0020561+07:00","updated_at":"2025-12-15T23:24:51.0825107+07:00","closed_at":"2025-12-15T23:24:51.0825107+07:00","close_reason":"Completed as part of refactoring (duplicates of worked issues)","dependencies":[{"issue_id":"gemmy-6hd","depends_on_id":"gemmy-2z6","type":"parent-child","created_at":"2025-12-15T22:53:18.0060582+07:00","created_by":"daemon"},{"issue_id":"gemmy-6hd","depends_on_id":"gemmy-rta","type":"blocks","created_at":"2025-12-15T22:56:27.0818485+07:00","created_by":"daemon"}]}
{"id":"gemmy-6id","title":"Clean up Settings Tab","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T23:46:33.8139791+07:00","updated_at":"2025-12-17T00:02:16.1854501+07:00","closed_at":"2025-12-17T00:02:16.1854501+07:00","close_reason":"Duplicate tasks created due to ID error"}
{"id":"gemmy-6lv","title":"Replace Focus Mode quotes with Pomodoro Timer","description":"Replace the current Focus Mode behavior (silence) with a visible 25-minute Pomodoro countdown timer in the speech bubble. When Focus Mode is active, the bubble should update every second.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-16T15:57:31.8587986+07:00","updated_at":"2025-12-16T15:58:26.3739774+07:00","closed_at":"2025-12-16T15:58:26.3739774+07:00","close_reason":"Implemented Pomodoro timer replacing quotes in Focus Mode"}
{"id":"gemmy-6yn","title":"Thực hành dùng beads","description":"Tao tạo cái task này để mày tập dùng mấy lệnh bd ready, update với close đấy thằng ngu.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T21:04:34.5675849+07:00","updated_at":"2025-12-15T15:46:31.5060824+07:00","closed_at":"2025-12-15T15:46:31.5060824+07:00","close_reason":"Done via workflow"}
{"id":"gemmy-701","title":"Fix Focus Mode: Music Not Playing","description":"Music does not play when Focus Mode is toggled. Suspect display:none or autoplay policy blocking hidden iframe.","design":"Change iframe visibility from display:none to 1x1 pixel off-screen. Ensure user interaction (click) propagates to autoplay permissions.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-16T16:50:31.8877723+07:00","updated_at":"2025-12-16T16:51:18.3131014+07:00","closed_at":"2025-12-16T16:51:18.3131014+07:00","close_reason":"Changed hidden iframe to 1x1 pixel off-screen to bypass autoplay restrictions."}
{"id":"gemmy-7ok","title":"Move source code to src/ directory","description":"Move core plugin files (main.ts, DataManager.ts, etc.) to a new src/ directory to organize the codebase.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T23:06:34.5122976+07:00","updated_at":"2025-12-15T23:12:15.9455305+07:00","closed_at":"2025-12-15T23:12:15.9455305+07:00","close_reason":"Moved core TypeScript files (constants.ts, DataManager.ts, main.ts, modals.ts, settings.ts, types.ts) to src/ directory and updated tsconfig.json and esbuild.config.mjs accordingly.","dependencies":[{"issue_id":"gemmy-7ok","depends_on_id":"gemmy-2z6","type":"parent-child","created_at":"2025-12-15T23:07:14.3534409+07:00","created_by":"daemon"}]}
{"id":"gemmy-8f7","title":"Overhaul Focus Timer UI","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T23:39:24.0463203+07:00","updated_at":"2025-12-16T23:46:18.4359114+07:00","closed_at":"2025-12-16T23:46:18.4359114+07:00","close_reason":"Superseded by user request for centralized UI"}
{"id":"gemmy-8j9","title":"Fix CSS Leak: Remove global .clickable-icon style","description":"The CSS rule for .clickable-icon is global and ruining Obsidian's native UI. Scope it to .gemmy-container.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-17T00:29:18.9626667+07:00","updated_at":"2025-12-17T00:32:35.4842175+07:00","closed_at":"2025-12-17T00:32:35.4842175+07:00","close_reason":"Scoped global CSS selectors (.clickable-icon, .modal-container ol) to plugin-specific classes (.gemmy-bubble, .gemmy-modal) to prevent theme leaks."}
{"id":"gemmy-8jd","title":"Move tooltips to appear below buttons","description":"User wants tooltips to appear below the buttons instead of above, because they currently cover the quote content.","design":"Update styles.css to position the ::after and ::before pseudo-elements below the button using top: 100% instead of bottom: 100%, and flip the arrow direction.","acceptance_criteria":"- [ ] Tooltips appear below the buttons on hover.\\n- [ ] Tooltip arrow points upwards towards the button.\\n- [ ] Tooltips do not cover the quote content.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T21:31:54.3405188+07:00","updated_at":"2025-12-19T21:32:29.5791378+07:00","closed_at":"2025-12-19T21:32:29.5791378+07:00","close_reason":"Updated styles.css to position tooltips below buttons (top: 100%) and flipped the arrow direction. This prevents tooltips from covering the quote content in the bubble."}
{"id":"gemmy-8qx","title":"UI Refactor: Move Settings back to Menu","description":"User yêu cầu xóa nút Settings (bánh răng) ở Normal Mode và đưa tính năng chỉnh Idle Frequency vào lại trong Menu chính (nút ☰) để giao diện gọn hơn.","design":"1. src/main.ts: Xóa khởi tạo normalSettingsButtonEl.\\\\n2. src/main.ts: Khôi phục mục 'Change Frequency' trong hàm showMainMenu.\\\\n3. src/modes/FocusManager.ts: Xóa logic ẩn/hiện normalSettingsButtonEl.\\\\n4. Clean up property trong class Gemmy.","acceptance_criteria":"- [ ] Nút Settings (icon bánh răng) đã bị xóa hoàn toàn khỏi giao diện Normal Mode.\\\\n- [ ] Menu chính (nút ☰) có mục 'Change Frequency' (icon clock).\\\\n- [ ] Bấm vào mục menu đó mở ra modal ChangeFrequencyModal hoạt động đúng.\\\\n- [ ] Code trong FocusManager không còn tham chiếu đến normalSettingsButtonEl gây lỗi.\\\\n- [ ] Không còn property normalSettingsButtonEl thừa trong class Gemmy.","notes":"CHANGE LOG: User thay đổi yêu cầu UI. Ban đầu tách ra nút riêng (gemmy-1dh.4), nhưng sau đó thấy không gọn nên yêu cầu đưa lại vào Menu. Đây là quyết định chốt về UX cho setting này.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T00:16:42.0885422+07:00","updated_at":"2025-12-18T00:20:07.8874791+07:00","closed_at":"2025-12-18T00:20:07.8874791+07:00","close_reason":"Removed settings button and restored menu item as requested."}
{"id":"gemmy-91i","title":"Fix Focus Mode: Slider Visibility \u0026 UI Timeout Bug","description":"Fix CSS for volume slider visibility and prevent Focus Mode UI from disappearing due to race condition with idle timer.","design":"1. CSS: Re-apply volume slider styles (failed prev). 2. Logic: Clear bubbleTimeout when entering Focus Mode to prevent UI hiding.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-16T16:46:49.0875202+07:00","updated_at":"2025-12-16T16:47:44.3896485+07:00","closed_at":"2025-12-16T16:47:44.3896485+07:00","close_reason":"Fixed CSS for volume slider and added clearTimeout to prevent UI race condition."}
{"id":"gemmy-933","title":"Normal Mode: Fix 'View All Quotes' data source","description":"Currently pointing to wrong file. Point to data.json as requested. Verify file existence.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T11:39:59.8662734+07:00","updated_at":"2025-12-17T12:03:03.3093352+07:00","closed_at":"2025-12-17T12:03:03.3093352+07:00","close_reason":"User fixed manually"}
{"id":"gemmy-93c","title":"Fix ChangeFrequencyModal not showing","description":"Investigate and fix why the ChangeFrequencyModal is not appearing or rendering correctly.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-15T15:49:53.8124965+07:00","updated_at":"2025-12-15T15:51:52.1783061+07:00","closed_at":"2025-12-15T15:51:52.1783061+07:00","close_reason":"Fixed ChangeFrequencyModal using undefined containerEl instead of contentEl"}
{"id":"gemmy-94p","title":"Add Favourite Mode","description":"Implement a toggle button to switch between normal random quotes and favorite quotes only. Includes UI update and filtering logic.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-15T20:16:19.4078794+07:00","updated_at":"2025-12-15T20:16:27.1908544+07:00","closed_at":"2025-12-15T20:16:27.1908544+07:00","close_reason":"Implemented. Added isFavouriteMode state, toggle button in UI, and filtering logic in saySomething function."}
{"id":"gemmy-9ee","title":"Fix file picker restriction by copying image to plugin folder","description":"The current implementation relies on file.path which is restricted or undefined in some contexts. The fix is to read the file content and save a copy to the plugin's directory, then use that local copy.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-16T00:05:52.6741461+07:00","updated_at":"2025-12-16T00:06:30.7384779+07:00","closed_at":"2025-12-16T00:06:30.7384779+07:00","close_reason":"Fixed by copying the selected file to the plugin directory using vault adapter and using the resource path provided by Obsidian API. This bypasses file.path restrictions."}
{"id":"gemmy-9ef","title":"Epic: Nâng cấp UI/UX (Persistence, Animations, Search)","description":"Gói nâng cấp lớn tập trung vào trải nghiệm người dùng, bao gồm việc lưu vị trí mascot, thêm hiệu ứng chuyển động và tính năng tìm kiếm quote.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-18T15:32:52.4867889+07:00","updated_at":"2025-12-18T15:48:10.5610019+07:00","closed_at":"2025-12-18T15:48:10.5610019+07:00","close_reason":"Đã hoàn thành tất cả các task nâng cấp UI/UX: Persistent Position, Animations, và Search \u0026 Filter."}
{"id":"gemmy-9h9","title":"Music continues playing in focus mode after playlist is cleared","description":"When a user clears the playlist and then enters focus mode, the last played track continues to play indefinitely. This is because the currentMusicId is not cleared when the playlist is empty, and the code logic uses this stale ID to start playback.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T10:48:14.9591738+07:00","updated_at":"2025-12-17T10:48:44.2853942+07:00","closed_at":"2025-12-17T10:48:44.2853942+07:00","close_reason":"Fixed bug where music would play even if playlist was empty."}
{"id":"gemmy-9l6","title":"Improve Mascot Draggable Logic","description":"The mascot's draggable functionality is currently fragile. Moving the mouse too quickly or off the window often causes the drag to 'break', leaving the mascot stuck. We need to improve the event handling to be more resilient.","design":"Modify makeDraggable in main.ts. Instead of attaching onmousemove and onmouseup to document, use activeDocument.addEventListener('mousemove', ...) and activeDocument.addEventListener('mouseup', ...). This ensures that even if the mouse pointer briefly leaves the document area or moves fast, the browser still tracks the movement relative to the active window.","acceptance_criteria":"- [ ] Dragging the mascot is smooth and doesn't disconnect during fast movements\n- [ ] Position is accurately saved to settings upon releasing the mouse button\n- [ ] Logic works correctly in pop-out windows or multi-window setups","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-19T01:39:41.1851567+07:00","updated_at":"2025-12-19T01:44:34.4621886+07:00","closed_at":"2025-12-19T01:44:34.4621886+07:00","close_reason":"Successfully implemented Phase 1 tasks: Markdown rendering, mascot bounce animation, improved draggable logic, and native tooltips.","dependencies":[{"issue_id":"gemmy-9l6","depends_on_id":"gemmy-0ly","type":"parent-child","created_at":"2025-12-19T01:39:47.1784722+07:00","created_by":"daemon"}]}
{"id":"gemmy-9le","title":"Implement Markdown Rendering for Quotes","description":"The current plain text rendering of quotes is limiting. Users cannot use formatting like bold for emphasis, italics for citations, or links for sources. This task involves integrating Obsidian's MarkdownRenderer to provide a rich text experience inside the Gemmy chat bubble.","design":"In QuoteManager.ts, import MarkdownRenderer from obsidian. Update the display logic in saySomething(), showPrevQuote(), and showNextQuote(). Instead of setting innerText, we will use MarkdownRenderer.render(this.plugin.app, quote, bubbleContentEl, '', this.plugin). We need to handle the clearing of the element before rendering.","acceptance_criteria":"- [ ] Text like **bold** renders as bold\n- [ ] Text like *italic* renders as italic\n- [ ] Hyperlinks like [link](url) are clickable and work\n- [ ] Rendering is fast and doesn't cause layout flickering\n- [ ] Works in both Normal and Favourite modes","notes":"Plan Agent has finalized the plan and is ready to start implementation. \nNEXT: Use a Build/General Agent to implement MarkdownRenderer in QuoteManager.ts.\nKEY DECISION: Using Obsidian's MarkdownRenderer for native feel.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-19T01:39:40.092356+07:00","updated_at":"2025-12-19T01:44:34.4527027+07:00","closed_at":"2025-12-19T01:44:34.4527027+07:00","close_reason":"Successfully implemented Phase 1 tasks: Markdown rendering, mascot bounce animation, improved draggable logic, and native tooltips.","dependencies":[{"issue_id":"gemmy-9le","depends_on_id":"gemmy-0ly","type":"parent-child","created_at":"2025-12-19T01:39:46.344868+07:00","created_by":"daemon"},{"issue_id":"gemmy-9le","depends_on_id":"gemmy-e66","type":"related","created_at":"2025-12-19T01:39:47.9619471+07:00","created_by":"daemon"}]}
{"id":"gemmy-a8q","title":"Allow users to customize avatar image","description":"Add a button in the menu to let users select a custom image path. Persist this choice in settings. Validate and use the custom image if set, otherwise fallback to default.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-15T23:52:09.7875814+07:00","updated_at":"2025-12-15T23:54:06.9815153+07:00","closed_at":"2025-12-15T23:54:06.9815153+07:00","close_reason":"Implemented custom avatar feature with settings persistence and menu UI"}
{"id":"gemmy-acg","title":"Implement Focus Mode Playlist Support","description":"Upgrade Focus Mode to support adding and playing YouTube Playlists alongside individual tracks. Currently, the system only supports individual video IDs. The new system will allow users to add full playlists, which will be displayed in the selection menu with a 'Playlist:' prefix and played in shuffle mode.","design":"1. **Data Structure (types.ts)**:\n   - Introduce FocusTrack (id, name, url) and FocusPlaylist (id, name, url).\n   - Update GemmySettings to include \focusTracks (for single videos) and \focusPlaylists (for playlists).\n   - Mark the old playlist array as deprecated but keep for migration.\n\n2. **Migration Logic (DataManager.ts)**:\n   - On plugin load, check if settings.playlist has items.\n   - If yes, migrate them to settings.focusTracks and clear settings.playlist to ensure backward compatibility without data loss.\n\n3. **UI/Modal Updates (modals.ts)**:\n   - In FocusSettingsModal, add a new section 'Add New Playlist' below 'Add New Track'.\n   - Input fields: 'Playlist Name' and 'YouTube Playlist URL'.\n   - Logic: Extract the list parameter from the URL to get the Playlist ID.\n\n4. **Focus Manager Logic (FocusManager.ts)**:\n   - populateMusicList(): Combine \focusTracks and \focusPlaylists.\n     - Tracks display as [Name].\n     - Playlists display as Playlist: [Name].\n     - Value of option should probably be prefixed (e.g., \track:ID vs playlist:ID) or handled by checking which list the ID belongs to.\n   - playFocusMusic(id):\n     - Determine if ID is a Track or Playlist.\n     - **If Track**: Use existing logic (src=.../embed/{id}?autoplay=1...).\n     - **If Playlist**: Use playlist embed format (src=.../embed?listType=playlist\u0026list={id}\u0026autoplay=1...).\n     - **Shuffle Logic**: Once the iframe loads, send the setShuffle(true) command via postMessage to randomize playback.\n\n5. **Controls**:\n   - Volume and Play/Pause controls must work for both modes.","acceptance_criteria":"- [ ] **Migration**: Existing user tracks in settings.playlist are successfully moved to settings.focusTracks on startup.\n- [ ] **Settings UI**: Users can add a new Playlist by providing a Name and a valid YouTube Playlist URL.\n- [ ] **Settings UI**: Users can see separate lists for Tracks and Playlists in the settings modal (to delete them if needed).\n- [ ] **Focus UI**: The music selection dropdown displays both tracks and playlists. Playlists are prefixed with 'Playlist: '.\n- [ ] **Playback (Track)**: Selecting a track plays the specific video.\n- [ ] **Playback (Playlist)**: Selecting a playlist embeds the playlist player.\n- [ ] **Shuffle**: When a playlist is loaded, it automatically enables shuffle mode (random order).\n- [ ] **Stability**: Switching between a Track and a Playlist works smoothly without iframe errors.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-18T02:00:43.6311191+07:00","updated_at":"2025-12-18T02:22:13.1065387+07:00","closed_at":"2025-12-18T02:22:13.1065387+07:00","close_reason":"Improved YouTube Playlist and Track playback logic, fixed ID extraction to be more robust, and removed problematic origin parameter. Also fixed a typo in main.ts."}
{"id":"gemmy-al2","title":"Fix Focus Mode Music Selector Visibility and Spacing","description":"Fix issue where the Music Selector dropdown appears in Normal Mode (should be hidden). Also, increase the vertical margin (spacing) above and below the Music Selector dropdown in Focus Mode UI.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-17T01:40:36.3251727+07:00","updated_at":"2025-12-17T01:42:11.2851344+07:00","closed_at":"2025-12-17T01:42:11.2851344+07:00","close_reason":"Fixed Focus Mode Music Selector visibility (added .hidden CSS rule) and spacing (added explicit margins in main.ts)."}
{"id":"gemmy-ay6","title":"Restructure project source into src directory","description":"Flat structure limits scalability. Move code into a standard src/ folder.","design":"Move .ts files to src/. Update tsconfig, esbuild, and package.json paths.","acceptance_criteria":"- [ ] All source files in src/\\n- [ ] Build script runs successfully\\n- [ ] Plugin loads in Obsidian","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-15T22:53:15.0931597+07:00","updated_at":"2025-12-15T23:24:51.0984577+07:00","closed_at":"2025-12-15T23:24:51.0984577+07:00","close_reason":"Completed as part of refactoring (duplicates of worked issues)","dependencies":[{"issue_id":"gemmy-ay6","depends_on_id":"gemmy-2z6","type":"parent-child","created_at":"2025-12-15T22:53:15.0931597+07:00","created_by":"daemon"},{"issue_id":"gemmy-ay6","depends_on_id":"gemmy-6hd","type":"blocks","created_at":"2025-12-15T22:56:05.4606545+07:00","created_by":"daemon"},{"issue_id":"gemmy-ay6","depends_on_id":"gemmy-mv6","type":"blocks","created_at":"2025-12-15T22:56:08.2034207+07:00","created_by":"daemon"},{"issue_id":"gemmy-ay6","depends_on_id":"gemmy-eax","type":"blocks","created_at":"2025-12-15T22:56:10.8570074+07:00","created_by":"daemon"},{"issue_id":"gemmy-ay6","depends_on_id":"gemmy-rta","type":"blocks","created_at":"2025-12-15T22:57:51.4241958+07:00","created_by":"daemon"}]}
{"id":"gemmy-b9v","title":"Refactor UI: Minimalist Hover-Only Controls","description":"Hide action buttons (Prev, Next, Menu, Favorite) by default. Show them only on hover to reduce visual noise.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T02:31:36.8555243+07:00","updated_at":"2025-12-16T02:32:32.5733042+07:00","closed_at":"2025-12-16T02:32:32.5733042+07:00","close_reason":"Implemented opacity transition on hover for button container in CSS."}
{"id":"gemmy-bav","title":"Upgrade Focus Mode to v2 (Custom Timer + Playlist)","description":"Overhaul Focus Mode with custom timer input and curated youtube playlist system synced via data.json","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-16T23:24:58.0022564+07:00","updated_at":"2025-12-16T23:28:41.3843799+07:00","closed_at":"2025-12-16T23:28:41.3843799+07:00","close_reason":"Completed upgrade to Focus Mode v2 with Playlist Management and Custom Timer"}
{"id":"gemmy-bd8","title":"Add missing tooltips to Normal Mode buttons","description":"Favorite button and Toggle Mode button are missing tooltips in Normal Mode. Add initial tooltips and dynamic updates.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T00:57:53.0826085+07:00","updated_at":"2025-12-17T00:58:15.7975979+07:00","closed_at":"2025-12-17T00:58:15.7975979+07:00","close_reason":"Added tooltips to Normal Mode buttons and implemented dynamic updates for Favorite button."}
{"id":"gemmy-bjr","title":"Fix broken Playlist Manager and refine Focus Mode UI","description":"Fix the broken Focus Mode by properly removing legacy default video references from modals.ts and main.ts. Restore the Playlist Manager. Implement UI changes: add icon to delete button, reposition Play/Pause button, and ensure auto-play works.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-17T02:18:18.9304817+07:00","updated_at":"2025-12-17T02:20:43.2272511+07:00","closed_at":"2025-12-17T02:20:43.2272511+07:00","close_reason":"Fixed modals.ts breakage, removed legacy default video UI, restored playlist manager, implemented auto-play, and refined UI buttons."}
{"id":"gemmy-bpi","title":"Refactor UI: Move actions to Menu, Replace History with Previous","description":"Move Add and Copy buttons to the context menu. Remove History button. Implement Previous button to navigate back through quote history.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-15T15:53:53.6678006+07:00","updated_at":"2025-12-15T15:55:09.2528036+07:00","closed_at":"2025-12-15T15:55:09.2528036+07:00","close_reason":"Refactored UI: Moved Add/Copy to Menu, Replaced History with Previous"}
{"id":"gemmy-c48","title":"Refactor Modals: Create FocusSettingsModal","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T23:46:33.31291+07:00","updated_at":"2025-12-17T00:02:16.1811365+07:00","closed_at":"2025-12-17T00:02:16.1811365+07:00","close_reason":"Duplicate tasks created due to ID error"}
{"id":"gemmy-d0c","title":"Remove Pink Background from Focus Container","description":"The .gemmy-focus-active class adds a pink background (#ffebee) to the button container, causing a visual mismatch. Remove this background to make it consistent with Normal Mode.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-17T00:49:03.0630095+07:00","updated_at":"2025-12-17T00:49:22.5114735+07:00","closed_at":"2025-12-17T00:49:22.5114735+07:00","close_reason":"Removed background-color, border-radius, and padding from .gemmy-focus-active class in styles.css to eliminate the unwanted pink background in Focus Mode."}
{"id":"gemmy-d1w","title":"Enhance Focus Mode: In-Menu Config \u0026 Optimization","description":"Move music config to menu, optimize playback (144p), and add volume control.","design":"1. Settings: Remove music URL field. 2. UI: Add 'Set Focus Music' to Bubble Menu. 3. Player: Use YouTube IFrame API (enablejsapi=1) + postMessage for lightweight control. Force 144p for perf. Add volume slider.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T16:36:53.4642055+07:00","updated_at":"2025-12-16T16:42:38.7905447+07:00","closed_at":"2025-12-16T16:42:38.7905447+07:00","close_reason":"Moved music config to menu, optimized playback with YouTube IFrame API (144p), and added volume slider."}
{"id":"gemmy-d7b","title":"Refactor Modals: FocusSettingsModal","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T23:51:32.8407707+07:00","updated_at":"2025-12-16T23:51:42.1762621+07:00","closed_at":"2025-12-16T23:51:42.1762621+07:00","close_reason":"Completed code implementation and fixed syntax error","dependencies":[{"issue_id":"gemmy-d7b","depends_on_id":"gemmy-3tw","type":"parent-child","created_at":"2025-12-16T23:51:32.8423848+07:00","created_by":"daemon"}]}
{"id":"gemmy-d95","title":"Feature: Toggle Gemmy Command","description":"Triển khai lệnh toggle để ẩn/hiện Gemmy bằng một hành động duy nhất. Giúp người dùng quản lý Gemmy dễ dàng qua hotkey hoặc command palette.","design":"1. Thêm phương thức toggle() vào class Gemmy trong src/main.ts.\\n2. Kiểm tra trạng thái this.appeared.\\n3. Nếu đang hiện thì gọi disappear(), nếu đang ẩn thì gọi appear().\\n4. Đăng ký command trong onload().","acceptance_criteria":"- [ ] Lệnh 'Toggle Gemmy' xuất hiện trong command palette.\\n- [ ] Lệnh ẩn Gemmy khi đang hiện.\\n- [ ] Lệnh hiện Gemmy khi đang ẩn.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-19T21:42:40.2462797+07:00","updated_at":"2025-12-19T21:54:06.404859+07:00","closed_at":"2025-12-19T21:54:06.404859+07:00","close_reason":"Implemented Toggle Gemmy command, Music Seek Bar, and Random 35s Segment Radio logic. All features are integrated and styled.","dependencies":[{"issue_id":"gemmy-d95","depends_on_id":"gemmy-4pg","type":"parent-child","created_at":"2025-12-19T21:42:47.961455+07:00","created_by":"daemon"}]}
{"id":"gemmy-db9","title":"Optimize DataManager writes","description":"Avoid O(n) writes when adding quotes. Consider debouncing or append-only logic if feasible, or at least optimize batch operations.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T23:21:35.8376385+07:00","updated_at":"2025-12-15T23:24:47.6050167+07:00","closed_at":"2025-12-15T23:24:47.6050167+07:00","close_reason":"Implemented debounce for save operations","dependencies":[{"issue_id":"gemmy-db9","depends_on_id":"gemmy-2z6","type":"parent-child","created_at":"2025-12-15T23:21:35.8392921+07:00","created_by":"daemon"}]}
{"id":"gemmy-dds","title":"Fix double tooltip issue","description":"Replace aria-label with data-tooltip in main.ts and styles.css to prevent the default system tooltip from appearing alongside the custom CSS tooltip.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-16T16:05:38.6675327+07:00","updated_at":"2025-12-16T16:06:06.1901784+07:00","closed_at":"2025-12-16T16:06:06.1901784+07:00","close_reason":"Replaced aria-label with data-tooltip to eliminate double tooltips"}
{"id":"gemmy-e4x","title":"Fix review agent mode to subagent","description":"Correction: The user explicitly requested a 'subagent', but the previous configuration set the mode to 'primary'. I need to update opencode.json to set 'mode': 'subagent' to align with the request and opencode_docs best practices.","design":"Change 'mode': 'primary' to 'mode': 'subagent' in the 'review' agent configuration within opencode.json.","acceptance_criteria":"- [ ] opencode.json 'review' agent mode is 'subagent'","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-19T11:44:15.6799449+07:00","updated_at":"2025-12-19T11:44:22.8290776+07:00","closed_at":"2025-12-19T11:44:22.8290776+07:00","close_reason":"Updated review agent mode to subagent"}
{"id":"gemmy-e66","title":"Add Mascot Bounce Animation","description":"Gemmy currently feels static and disconnected from the text it delivers. Adding a visual 'cue' when it speaks will improve the personality of the mascot and provide better user feedback.","design":"Define a @keyframes animation named gemmy-bounce in styles.css that slightly scales or translates the mascot. In QuoteManager.ts, specifically in the saySomething() method, apply a temporary CSS class to the imageEl. Use a setTimeout or an animationend listener to remove the class so the animation can be triggered again.","acceptance_criteria":"- [ ] The mascot mascot (image) performs a subtle, friendly bounce when a new quote bubble appears\n- [ ] The animation does not conflict with the draggable functionality\n- [ ] The animation is short (approx 300-500ms) and not distracting","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-19T01:39:41.7871405+07:00","updated_at":"2025-12-19T01:44:34.458176+07:00","closed_at":"2025-12-19T01:44:34.458176+07:00","close_reason":"Successfully implemented Phase 1 tasks: Markdown rendering, mascot bounce animation, improved draggable logic, and native tooltips.","dependencies":[{"issue_id":"gemmy-e66","depends_on_id":"gemmy-0ly","type":"parent-child","created_at":"2025-12-19T01:39:47.5785857+07:00","created_by":"daemon"}]}
{"id":"gemmy-ea2","title":"Remove default playlist","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T23:39:22.9867945+07:00","updated_at":"2025-12-16T23:46:18.4519095+07:00","closed_at":"2025-12-16T23:46:18.4519095+07:00","close_reason":"Superseded by user request for centralized UI"}
{"id":"gemmy-eax","title":"Refactor Modal UI code","description":"Duplicate code between ViewFavoritesModal and ViewAllQuotesModal.","design":"Create abstract BaseQuoteModal. Optimize render logic.","acceptance_criteria":"- [ ] Duplicate code removed\\n- [ ] Modals share base class","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T22:53:24.3415745+07:00","updated_at":"2025-12-15T23:24:51.0943125+07:00","closed_at":"2025-12-15T23:24:51.0943125+07:00","close_reason":"Completed as part of refactoring (duplicates of worked issues)","dependencies":[{"issue_id":"gemmy-eax","depends_on_id":"gemmy-2z6","type":"parent-child","created_at":"2025-12-15T22:53:24.3426154+07:00","created_by":"daemon"},{"issue_id":"gemmy-eax","depends_on_id":"gemmy-rta","type":"blocks","created_at":"2025-12-15T22:56:32.3272762+07:00","created_by":"daemon"}]}
{"id":"gemmy-emi","title":"Remove delayed tooltips and keep immediate CSS tooltips","description":"User reports double tooltips on buttons. One appears immediately (CSS-based) and another after a delay (Obsidian setTooltip). The goal is to remove the delayed one and rely solely on the immediate CSS-based tooltip using aria-label.","design":"Replace all occurrences of 'setTooltip' with 'setAttribute(\"aria-label\", ...)' or equivalent attribute setting. Update CSS selectors if necessary to ensure all buttons are covered by the instant tooltip style.","acceptance_criteria":"- [ ] No double tooltips on any Gemmy buttons.\\n- [ ] Tooltips appear immediately on hover.\\n- [ ] Tooltips disappear immediately on mouse leave.\\n- [ ] Favorite and Mode toggle buttons correctly update their tooltip text when their state changes.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-19T03:28:01.2040063+07:00","updated_at":"2025-12-19T21:26:06.0627726+07:00","closed_at":"2025-12-19T21:26:06.0627726+07:00","close_reason":"Removed all Obsidian setTooltip calls and replaced them with aria-label to rely on the instant CSS tooltip system. This fixes the 'double tooltip' issue where both CSS and Obsidian tooltips were appearing."}
{"id":"gemmy-er1","title":"Remove Seek Bar and change radio duration to 10s","description":"Remove the music seek bar as requested and update the random segment duration to 10 seconds.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T22:12:15.1925708+07:00","updated_at":"2025-12-19T22:15:37.7610366+07:00","closed_at":"2025-12-19T22:15:37.7610366+07:00","close_reason":"Fixed bug where quote bubble was missing after toggle (ensured bubble visibility and Focus UI rendering in appear()). Removed seek bar and updated random radio duration to 10 seconds as requested."}
{"id":"gemmy-f4c","title":"Fix distorted avatar image aspect ratio","description":"User reported that the custom avatar image appears squashed/distorted. Need to ensure the image maintains its aspect ratio, likely by using object-fit: cover in CSS.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-16T00:09:26.1451315+07:00","updated_at":"2025-12-16T00:09:53.1257911+07:00","closed_at":"2025-12-16T00:09:53.1257911+07:00","close_reason":"Applied object-fit: cover to the .gemmy-container img CSS class to ensure the image covers the circular area without distortion."}
{"id":"gemmy-fqm","title":"Task: Lưu vị trí Gemmy (Persistent Position)","description":"Lưu tọa độ (X, Y) của Gemmy vào settings để nó giữ nguyên vị trí sau khi khởi động lại Obsidian.","design":"1. Thêm field 'position: {top: number, left: number}' vào GemmySettings.\\n2. Cập nhật makeDraggable để lưu vị trí mới vào settings khi kết thúc drag (mouseup).\\n3. Trong hàm appear(), áp dụng tọa độ đã lưu cho gemmyEl.","acceptance_criteria":"- [ ] Kéo Gemmy đến một vị trí bất kỳ.\\n- [ ] Restart plugin hoặc Obsidian.\\n- [ ] Gemmy phải xuất hiện đúng vị trí đã kéo trước đó.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T15:32:53.0795612+07:00","updated_at":"2025-12-18T15:41:45.151764+07:00","closed_at":"2025-12-18T15:41:45.151764+07:00","close_reason":"Đã triển khai lưu vị trí Gemmy vào settings và áp dụng khi plugin load.","dependencies":[{"issue_id":"gemmy-fqm","depends_on_id":"gemmy-9ef","type":"parent-child","created_at":"2025-12-18T15:33:02.9724876+07:00","created_by":"daemon"}]}
{"id":"gemmy-g07","title":"Create new subagent: review","description":"Initialize a new skill named 'review' in the .claude/skills directory. This agent will be responsible for reviewing content/code based on user requirements.","design":"1. Create directory .claude/skills/review\\n2. Create SKILL.md with basic template structure\\n3. Register capability","acceptance_criteria":"- [ ] Directory .claude/skills/review exists\\n- [ ] SKILL.md created with valid structure\\n- [ ] Skill is discoverable","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-19T11:40:30.2910839+07:00","updated_at":"2025-12-19T11:40:40.6473318+07:00","closed_at":"2025-12-19T11:40:40.6473318+07:00","close_reason":"Created .claude/skills/review/SKILL.md with basic template"}
{"id":"gemmy-g29","title":"Tạo subagent opencode_docs_agent","description":"Tạo một subagent chuyên trách về việc quản lý cấu hình opencode.json và tra cứu tài liệu OpenCode.","design":"Thêm định nghĩa agent vào opencode.json hoặc tạo file markdown trong .opencode/agent/opencode_docs_agent.md. Agent này sẽ có quyền đọc và tra cứu web để hỗ trợ user cấu hình project.","acceptance_criteria":"- File .opencode/agent/opencode_docs_agent.md được tạo với nội dung phù hợp.\\n- Có thể gọi agent bằng cách @opencode_docs_agent trong chat.\\n- Agent có quyền truy cập tool webfetch và read.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-19T12:27:06.898366+07:00","updated_at":"2025-12-19T12:32:47.0792527+07:00","closed_at":"2025-12-19T12:32:47.0792527+07:00","close_reason":"Đã thêm opencode_docs_agent vào opencode.json"}
{"id":"gemmy-g3j","title":"Refactor Modals to use shared base class","description":"Create a base Modal class to reduce code duplication in modals.ts.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T23:07:00.7967105+07:00","updated_at":"2025-12-15T23:24:51.0864145+07:00","closed_at":"2025-12-15T23:24:51.0864145+07:00","close_reason":"Completed as part of refactoring (duplicates of worked issues)","dependencies":[{"issue_id":"gemmy-g3j","depends_on_id":"gemmy-2z6","type":"parent-child","created_at":"2025-12-15T23:07:37.9231224+07:00","created_by":"daemon"},{"issue_id":"gemmy-g3j","depends_on_id":"gemmy-7ok","type":"blocks","created_at":"2025-12-15T23:09:21.0034208+07:00","created_by":"daemon"}]}
{"id":"gemmy-g9u","title":"Change idle frequency unit to seconds","description":"Switch idle talk frequency from minutes to seconds in settings, modal, and logic.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T15:46:34.6940282+07:00","updated_at":"2025-12-15T15:47:23.5013669+07:00","closed_at":"2025-12-15T15:47:23.5013669+07:00","close_reason":"Updated frequency unit to seconds in logic, settings, and modal."}
{"id":"gemmy-gb5","title":"Polish UI Styles \u0026 Visibility","description":"Make Focus Mode buttons match Normal Mode style. Ensure Settings button only appears in Focus Mode.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T23:57:51.3201535+07:00","updated_at":"2025-12-17T00:02:16.1832678+07:00","closed_at":"2025-12-17T00:02:16.1832678+07:00","close_reason":"Duplicate tasks created due to ID error"}
{"id":"gemmy-gdj","title":"Refactor View All Button to Command","description":"Remove the 'View All' button from the UI and ensure a command exists to trigger the ViewAllQuotesModal.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T02:27:42.5957454+07:00","updated_at":"2025-12-15T02:30:00.7529919+07:00","closed_at":"2025-12-15T02:30:00.7529919+07:00"}
{"id":"gemmy-gtr","title":"Refactor main.ts into smaller components","description":"Split the monolithic main.ts file into separate files for Modals, Settings, and the main Plugin class to improve maintainability.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T20:27:52.5330039+07:00","updated_at":"2025-12-15T20:30:44.4557312+07:00","closed_at":"2025-12-15T20:30:44.4557312+07:00","close_reason":"Refactored main.ts into settings.ts, modals.ts, types.ts and updated main.ts imports."}
{"id":"gemmy-hfc","title":"Add Video Name and Music Link to Focus Mode Settings","description":"Allow users to input a custom video name and music link (URL) in the Focus Mode Settings modal. These settings should be saved and persist.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T01:23:47.4562428+07:00","updated_at":"2025-12-17T01:25:53.6389281+07:00","closed_at":"2025-12-17T01:25:53.6389281+07:00","close_reason":"Implemented Default Focus Video Name and URL settings in FocusModeModal and updated main logic to use them."}
{"id":"gemmy-ibe","title":"Fix: Quote bubble missing after toggle","description":"When Gemmy is toggled off and on, the quote bubble remains hidden.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-19T22:12:14.6606682+07:00","updated_at":"2025-12-19T22:15:37.7557545+07:00","closed_at":"2025-12-19T22:15:37.7557545+07:00","close_reason":"Fixed bug where quote bubble was missing after toggle (ensured bubble visibility and Focus UI rendering in appear()). Removed seek bar and updated random radio duration to 10 seconds as requested."}
{"id":"gemmy-iej","title":"Cleanup Obsidian Settings Tab","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T23:51:33.337163+07:00","updated_at":"2025-12-16T23:51:42.1789772+07:00","closed_at":"2025-12-16T23:51:42.1789772+07:00","close_reason":"Completed code implementation and fixed syntax error","dependencies":[{"issue_id":"gemmy-iej","depends_on_id":"gemmy-3tw","type":"parent-child","created_at":"2025-12-16T23:51:33.3382011+07:00","created_by":"daemon"}]}
{"id":"gemmy-iox","title":"Fix Prev button showing random/undefined quotes","description":"Investigate and fix the logic for Previous button. Ensure historyIndex bounds checking is correct and quoteHistory is properly maintained.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-15T15:59:04.0510417+07:00","updated_at":"2025-12-15T16:02:01.5614743+07:00","closed_at":"2025-12-15T16:02:01.5614743+07:00","close_reason":"Investigated logic, found correct bounds check. No changes needed."}
{"id":"gemmy-jk7","title":"Fix Focus Mode Button Visibility \u0026 Styling","description":"1. Focus Settings button is visible in Normal Mode (should be hidden). 2. Focus Mode buttons still have inconsistent styling (background/color) compared to Normal Mode.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-17T00:41:51.5403482+07:00","updated_at":"2025-12-17T00:45:22.3295418+07:00","closed_at":"2025-12-17T00:45:22.3295418+07:00","close_reason":"Forced transparent background on all buttons and added generic hidden utility class to fix visibility and styling issues."}
{"id":"gemmy-joc","title":"Task: Tìm kiếm \u0026 Lọc trong modal View All Quotes","description":"Thêm thanh tìm kiếm vào modal hiển thị tất cả các câu quote để người dùng dễ dàng tìm kiếm.","design":"1. Thêm một TextComponent làm search bar ở phía trên cùng của ViewAllQuotesModal.\\n2. Viết logic lọc mảng allQuotes dựa trên input của người dùng.\\n3. Re-render danh sách li mỗi khi search input thay đổi.","acceptance_criteria":"- [ ] Mở modal View All Quotes.\\n- [ ] Gõ từ khóa vào thanh tìm kiếm.\\n- [ ] Danh sách hiển thị đúng các câu quote chứa từ khóa đó.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T15:32:54.4208043+07:00","updated_at":"2025-12-18T15:48:09.8702556+07:00","closed_at":"2025-12-18T15:48:09.8702556+07:00","close_reason":"Đã triển khai thanh tìm kiếm và bộ lọc trong modal View All Quotes.","dependencies":[{"issue_id":"gemmy-joc","depends_on_id":"gemmy-9ef","type":"parent-child","created_at":"2025-12-18T15:33:04.4807212+07:00","created_by":"daemon"}]}
{"id":"gemmy-jvd","title":"Refactor Modals to use shared base class","description":"Create a BaseGemmyModal to handle common setup/teardown and shared UI elements.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T23:21:38.707859+07:00","updated_at":"2025-12-15T23:22:57.2628815+07:00","closed_at":"2025-12-15T23:22:57.2628815+07:00","close_reason":"Introduced BaseGemmyModal to reduce boilerplate","dependencies":[{"issue_id":"gemmy-jvd","depends_on_id":"gemmy-2z6","type":"parent-child","created_at":"2025-12-15T23:21:38.7087184+07:00","created_by":"daemon"}]}
{"id":"gemmy-kic","title":"Move video management from global settings to Focus Settings Modal","description":"User requested to remove video management from global settings tab and ensure it exists in the Focus Mode settings modal (triggered by the button in Focus Mode). Also fix any method name typos in modals.ts.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T01:59:53.9390334+07:00","updated_at":"2025-12-17T02:01:14.1645735+07:00","closed_at":"2025-12-17T02:01:14.1645735+07:00","close_reason":"Moved video management to Focus Settings Modal and fixed typo"}
{"id":"gemmy-l10","title":"Fix music playback and optimize 10s random segment logic","description":"Music is currently not playing in Focus Mode. Need to fix the YouTube IFrame API integration and ensure the 10s random segment logic works reliably.","design":"1. Use a more robust way to detect when YouTube is ready.\\n2. Ensure duration is captured before attempting to seek.\\n3. Make sure unmute and play commands are sent correctly.\\n4. Add logging to debug the message flow.\\n5. Call review agent after implementation.","acceptance_criteria":"- [ ] Music plays automatically in Focus Mode.\\n- [ ] Music starts at a random position.\\n- [ ] Each segment lasts exactly 10 seconds.\\n- [ ] Tracks switch correctly after 10 seconds.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-19T22:49:57.2758839+07:00","updated_at":"2025-12-19T22:56:02.7376021+07:00","closed_at":"2025-12-19T22:56:02.7376021+07:00","close_reason":"Fixed music playback and radio logic after thorough professional code review. Addressed security (origin/source checks), memory leaks (event listener cleanup), and race conditions (isPlayerReady flag). Also fixed a bug where Gemmy stopped speaking after being hidden and shown."}
{"id":"gemmy-l8v","title":"Fix Focus Mode V3 (UI, Logic \u0026 Rules)","description":"Comprehensive overhaul of Focus Mode V3 based on user feedback. Goals: Fix UI bugs, enforce style consistency, correct timer logic, and centralize settings.","notes":"CONTEXT: User reported 6 critical issues (invisible inputs, missing timer, quotes leaking into focus mode, inconsistent styles). See rules.md for strict guidelines.","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-16T23:57:49.3616986+07:00","updated_at":"2025-12-17T00:21:22.6166347+07:00","closed_at":"2025-12-17T00:21:22.6166347+07:00","close_reason":"All subtasks (UI fixes, Timer logic, Style consistency) completed."}
{"id":"gemmy-lb7","title":"Refine Focus Mode UI \u0026 Music Manager","description":"","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-16T23:39:22.3273294+07:00","updated_at":"2025-12-16T23:46:18.4519095+07:00","closed_at":"2025-12-16T23:46:18.4519095+07:00","close_reason":"Superseded by user request for centralized UI"}
{"id":"gemmy-le2","title":"Focus Mode: Remove 'Timer settings' from settings modal","description":"User can edit time directly on bubble. Remove redundant setting from modal.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T11:39:44.9117849+07:00","updated_at":"2025-12-17T11:44:43.3324388+07:00","closed_at":"2025-12-17T11:44:43.3324388+07:00","close_reason":"Removed Timer Settings section from FocusSettingsModal"}
{"id":"gemmy-lg1","title":"Fix file picker not updating text field and image loading","description":"User reported 'nothing happens' after selecting a file. This could be due to file.path access failing or textComponent not updating. Also need to ensure local file paths are properly formatted (file:/// prefix) for the \u003cimg\u003e tag to work in Electron.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-16T00:03:34.5091092+07:00","updated_at":"2025-12-16T00:04:13.1508817+07:00","closed_at":"2025-12-16T00:04:13.1508817+07:00","close_reason":"Added proper file path handling, feedback notices, and conversion to app://local/ URL for Electron compatibility"}
{"id":"gemmy-lry","title":"Refine Focus Mode: Auto-play, UI, and Defaults","description":"Epic to address user feedback on Focus Mode: enable immediate auto-play, remove legacy default video settings, add icons to delete buttons, and rearrange playback controls.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-17T02:11:46.4811441+07:00","updated_at":"2025-12-17T02:23:25.301673+07:00","closed_at":"2025-12-17T02:23:25.301673+07:00","close_reason":"All objectives completed via task gemmy-upn and bug fix gemmy-bjr"}
{"id":"gemmy-m6a","title":"Decompose main.ts into smaller modules","description":"Split the large main.ts file into smaller, focused modules (e.g. commands, settings, UI).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T23:06:43.4233452+07:00","updated_at":"2025-12-15T23:20:36.8925262+07:00","closed_at":"2025-12-15T23:20:36.8925262+07:00","close_reason":"Refactored main.ts into src/ modules (main, settings, modals, DataManager, etc.)","dependencies":[{"issue_id":"gemmy-m6a","depends_on_id":"gemmy-2z6","type":"parent-child","created_at":"2025-12-15T23:07:22.1198031+07:00","created_by":"daemon"},{"issue_id":"gemmy-m6a","depends_on_id":"gemmy-7ok","type":"blocks","created_at":"2025-12-15T23:09:06.5214432+07:00","created_by":"daemon"}]}
{"id":"gemmy-mmv","title":"Optimize imports in main.ts","description":"Remove unused imports (debounce, PluginSettingTab, Setting, Modal) from main.ts after refactoring.","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-15T20:31:35.5955606+07:00","updated_at":"2025-12-15T20:31:55.6491078+07:00","closed_at":"2025-12-15T20:31:55.6491078+07:00","close_reason":"Removed unused imports."}
{"id":"gemmy-mv6","title":"Decompose main.ts God Class","description":"main.ts violates SRP by mixing UI, state, and lifecycle.","design":"Extract Gemmy UI to src/ui/GemmyView.ts. Extract commands to src/commands.ts.","acceptance_criteria":"- [ ] main.ts reduced to lifecycle management\\n- [ ] UI logic isolated in modules","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T22:53:21.4099019+07:00","updated_at":"2025-12-15T23:24:51.0917497+07:00","closed_at":"2025-12-15T23:24:51.0917497+07:00","close_reason":"Completed as part of refactoring (duplicates of worked issues)","dependencies":[{"issue_id":"gemmy-mv6","depends_on_id":"gemmy-2z6","type":"parent-child","created_at":"2025-12-15T22:53:21.4127504+07:00","created_by":"daemon"},{"issue_id":"gemmy-mv6","depends_on_id":"gemmy-rta","type":"blocks","created_at":"2025-12-15T22:56:29.6977653+07:00","created_by":"daemon"}]}
{"id":"gemmy-n10","title":"Refine Focus Mode: Play music internally","description":"Change focus mode music implementation to play inside Obsidian (hidden iframe for YouTube) instead of opening new window.","design":"Use hidden iframe for YouTube embeds. Parse video ID from URL. Append iframe to gemmy container. Remove on stop.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T16:31:28.5653645+07:00","updated_at":"2025-12-16T16:32:21.080093+07:00","closed_at":"2025-12-16T16:32:21.080093+07:00","close_reason":"Implemented hidden YouTube iframe for internal playback."}
{"id":"gemmy-nng","title":"Polish UI Styles \u0026 Visibility","description":"Polish UI Styles \u0026 Visibility logic for buttons.","notes":"REQ 1: Focus Mode buttons must look exactly like Normal Mode buttons (transparent bg, hover effect). Use class 'clickable-icon'. REQ 2: Settings (Menu) button must ONLY be visible in Focus Mode. Hide it in Normal Mode.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T23:58:07.2881378+07:00","updated_at":"2025-12-17T00:19:02.8978169+07:00","closed_at":"2025-12-17T00:19:02.8978169+07:00","close_reason":"Polished UI styles by adding clickable-icon class and synchronizing CSS.","dependencies":[{"issue_id":"gemmy-nng","depends_on_id":"gemmy-l8v","type":"parent-child","created_at":"2025-12-16T23:58:07.2891719+07:00","created_by":"daemon"}]}
{"id":"gemmy-oe2","title":"Fix Focus Mode music selection and auto-play","description":"1. Fix broken music selection menu in Focus Mode. 2. Implement auto-play when a track is selected immediately.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T02:36:15.8095663+07:00","updated_at":"2025-12-17T02:39:26.8144531+07:00","closed_at":"2025-12-17T02:39:26.8144531+07:00","close_reason":"Implemented populateMusicList to refresh dropdown on settings change. Verified onchange handler triggers playback immediately."}
{"id":"gemmy-pje","title":"Implement Auto-play and Remove Legacy Default Video Settings","description":"1. Modify main.ts: Ensure playFocusMusic is called immediately when entering Focus Mode, even if a track was previously selected. 2. Remove defaultFocusVideoName/Url from types.ts, constants.ts, and modals.ts (FocusSettingsModal) to rely solely on the playlist.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T02:12:37.3773693+07:00","updated_at":"2025-12-17T02:23:09.6875933+07:00","closed_at":"2025-12-17T02:23:09.6875933+07:00","close_reason":"Duplicate of gemmy-upn"}
{"id":"gemmy-q5t","title":"Implement Focus Mode v2 UI","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T23:25:08.6013466+07:00","updated_at":"2025-12-16T23:28:33.1988717+07:00","closed_at":"2025-12-16T23:28:33.1988717+07:00","close_reason":"Implemented Focus Mode v2 UI with custom timer and playlist selector","dependencies":[{"issue_id":"gemmy-q5t","depends_on_id":"gemmy-bav","type":"parent-child","created_at":"2025-12-16T23:25:08.6023817+07:00","created_by":"daemon"}]}
{"id":"gemmy-qkp","title":"Configure 'review' subagent in opencode.json","description":"Add a new 'review' agent configuration to opencode.json and create its prompt file. Clean up the incorrectly created skill directory.","design":"1. Remove .claude/skills/review\\n2. Create prompts/review.txt with reviewer persona instructions\\n3. Update opencode.json to include the 'review' agent definition with read-only permissions","acceptance_criteria":"- [ ] .claude/skills/review directory removed\\n- [ ] prompts/review.txt created\\n- [ ] opencode.json contains 'review' agent config","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-19T11:42:05.2500587+07:00","updated_at":"2025-12-19T11:42:22.5045621+07:00","closed_at":"2025-12-19T11:42:22.5045621+07:00","close_reason":"Removed incorrect skill, created prompts/review.txt and updated opencode.json"}
{"id":"gemmy-rir","title":"Refine Timer Control UI","description":"Refine Timer Control UI: Add inline Play/Pause buttons.","notes":"REQ: Countdown timer must show 'MM:SS'. IMPORTANT: Must have Play/Pause/Stop buttons IMMEDIATELY next to the timer text (same line). Structure: [Timer Text] [Control Button].","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T23:58:06.807395+07:00","updated_at":"2025-12-17T00:14:31.3868753+07:00","closed_at":"2025-12-17T00:14:31.3868753+07:00","close_reason":"Added inline Play/Pause/Stop buttons and implemented pause logic.","dependencies":[{"issue_id":"gemmy-rir","depends_on_id":"gemmy-l8v","type":"parent-child","created_at":"2025-12-16T23:58:06.8089462+07:00","created_by":"daemon"}]}
{"id":"gemmy-rsd","title":"Restore Button Borders \u0026 Backgrounds","description":"User wants all buttons (Focus \u0026 Normal) to have a consistent visible border and background color, matching the 'Favorite' button style. Reverting the transparency change and applying standard theme variables.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T00:51:13.2189415+07:00","updated_at":"2025-12-17T00:51:43.6838331+07:00","closed_at":"2025-12-17T00:51:43.6838331+07:00","close_reason":"Restored visible background (var(--interactive-normal)) and border (var(--background-modifier-border)) to all buttons to match user's preferred 'standard' button style."}
{"id":"gemmy-rta","title":"QA and Regression Testing","description":"Verify plugin functionality after major refactor.","design":"Manual testing of all features: Add Quote, Toggle Favorite, Save/Load, Settings. Check Console for errors.","acceptance_criteria":"- [ ] No console errors on load\\n- [ ] Data persists correctly\\n- [ ] UI modals open/close without lag\\n- [ ] All features operational","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T22:56:19.3144462+07:00","updated_at":"2025-12-16T13:15:13.5376188+07:00","closed_at":"2025-12-16T13:15:13.5376188+07:00","close_reason":"Verified build success (via esbuild), reviewed logic for all features, and fixed linting errors. Ready for release.","dependencies":[{"issue_id":"gemmy-rta","depends_on_id":"gemmy-2z6","type":"parent-child","created_at":"2025-12-15T22:56:19.3154851+07:00","created_by":"daemon"}]}
{"id":"gemmy-sdr","title":"Add Random Button to Focus Mode","description":"Add a random button next to Play/Pause in Focus Mode. Clicking it randomly selects a track or playlist from the available list and plays it. Updates the dropdown UI to match the selection.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-18T02:58:08.3276137+07:00","updated_at":"2025-12-18T03:00:05.4003159+07:00","closed_at":"2025-12-18T03:00:05.4003159+07:00","close_reason":"Implemented Random button in FocusManager.ts"}
{"id":"gemmy-t0i","title":"Implement Favorites System","description":"Add 'favoriteQuotes' to data structure, add Heart button to UI, and add 'View Favorites' modal.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-15T03:04:00.002293+07:00","updated_at":"2025-12-15T03:05:11.1404337+07:00","closed_at":"2025-12-15T03:05:11.1404337+07:00"}
{"id":"gemmy-ta5","title":"Add Hide Button","description":"Add a 'Hide' button to the left of the History button to trigger the disappear function.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-15T02:33:22.7406357+07:00","updated_at":"2025-12-15T02:33:41.4052407+07:00","closed_at":"2025-12-15T02:33:41.4052407+07:00"}
{"id":"gemmy-upn","title":"Implement Auto-play and Remove Legacy Default Video Settings","description":"1. Modify main.ts: Ensure playFocusMusic is called immediately when entering Focus Mode, even if a track was previously selected. 2. Remove defaultFocusVideoName/Url from types.ts, constants.ts, and modals.ts (FocusSettingsModal) to rely solely on the playlist.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T02:12:47.6564682+07:00","updated_at":"2025-12-17T02:15:47.5163827+07:00","closed_at":"2025-12-17T02:15:47.5163827+07:00","close_reason":"Implemented auto-play logic and removed legacy default settings","dependencies":[{"issue_id":"gemmy-upn","depends_on_id":"gemmy-lry","type":"parent-child","created_at":"2025-12-17T02:13:03.0831493+07:00","created_by":"daemon"}]}
{"id":"gemmy-v6n","title":"Feature: Focus Mode","description":"Implement a Focus Mode that silences Gemmy's idle talk to allow deep work.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-16T02:31:45.2129824+07:00","updated_at":"2025-12-16T02:34:20.1242556+07:00","closed_at":"2025-12-16T02:34:20.1242556+07:00","close_reason":"Implemented Focus Mode command, toggle logic, and visual cues (opacity)."}
{"id":"gemmy-wur","title":"Implement instant tooltips for buttons","description":"Add CSS rules to display tooltips immediately on hover using the aria-label attribute, bypassing the default system delay.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T16:03:56.9301713+07:00","updated_at":"2025-12-16T16:04:07.230275+07:00","closed_at":"2025-12-16T16:04:07.230275+07:00","close_reason":"Implemented CSS-based instant tooltips"}
{"id":"gemmy-xbp","title":"Focus Mode: Add Play/Pause Button \u0026 Fix Playback","description":"Add explicit Play/Pause button in Focus Mode to handle autoplay restrictions and user control. Debug playback issues.","design":"1. UI: Add Play/Pause button next to Focus Toggle. 2. Logic: Button sends 'playVideo'/'pauseVideo' to YouTube iframe. 3. State: Track playing state to toggle icon. 4. Fix: Ensure 'autoplay=1' and 'enablejsapi=1' are correctly set. Add error handling for invalid URLs.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T16:52:42.7570535+07:00","updated_at":"2025-12-16T16:54:02.4679438+07:00","closed_at":"2025-12-16T16:54:02.4679438+07:00","close_reason":"Added Play/Pause button and explicit playback control logic to fix autoplay issues."}
{"id":"gemmy-xdg","title":"Fix FocusSettingsModal Inputs","description":"Fix invisible inputs in FocusSettingsModal (Name \u0026 YouTube URL).","notes":"PROBLEM: User reported 'đéo thấy chỗ nào cho điền tên và link'. IMPLEMENTATION: Check src/modals.ts. Ensure Name and URL inputs are correctly appended to the contentEl and have proper CSS styles (width, display) to be visible.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T23:58:05.8369416+07:00","updated_at":"2025-12-17T00:06:55.4986474+07:00","closed_at":"2025-12-17T00:06:55.4986474+07:00","close_reason":"Replaced raw inputs with TextComponent in FocusSettingsModal to fix visibility issue","dependencies":[{"issue_id":"gemmy-xdg","depends_on_id":"gemmy-l8v","type":"parent-child","created_at":"2025-12-16T23:58:05.841988+07:00","created_by":"daemon"}]}
{"id":"gemmy-xrq","title":"Add video management to Focus Mode settings","description":"Allow users to add/delete videos (name, link) in Focus Mode settings. Persist data to data.json. UI should include a list of videos with delete buttons and a form to add new ones.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-17T01:50:35.8834592+07:00","updated_at":"2025-12-17T01:53:02.5786206+07:00","closed_at":"2025-12-17T01:53:02.5786206+07:00","close_reason":"Implemented video management UI in settings tab"}
{"id":"gemmy-xxy","title":"Feature: Music Seek Bar in Focus Mode","description":"Thêm thanh tua nhạc (slider) vào giao diện Focus Mode, cho phép người dùng theo dõi tiến trình và nhảy đến vị trí bất kỳ trong bài hát.","design":"1. Tạo input type='range' trong FocusManager.ts.\\n2. Style slider trong styles.css.\\n3. Sử dụng lệnh 'seekTo' của YouTube IFrame API khi người dùng kéo slider.\\n4. Cập nhật vị trí slider theo thời gian thực bằng cách lắng nghe getCurrentTime từ IFrame.","acceptance_criteria":"- [ ] Thanh tua hiển thị trong Focus Mode khi có nhạc.\\n- [ ] Kéo thanh tua làm thay đổi vị trí phát nhạc.\\n- [ ] Thanh tua tự động chạy theo bài nhạc.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-19T21:42:40.7506665+07:00","updated_at":"2025-12-19T21:54:06.4127271+07:00","closed_at":"2025-12-19T21:54:06.4127271+07:00","close_reason":"Implemented Toggle Gemmy command, Music Seek Bar, and Random 35s Segment Radio logic. All features are integrated and styled.","dependencies":[{"issue_id":"gemmy-xxy","depends_on_id":"gemmy-4pg","type":"parent-child","created_at":"2025-12-19T21:42:48.4160225+07:00","created_by":"daemon"},{"issue_id":"gemmy-xxy","depends_on_id":"gemmy-zaz","type":"blocks","created_at":"2025-12-19T21:42:49.2955691+07:00","created_by":"daemon"}]}
{"id":"gemmy-y4f","title":"Fix Focus Mode music menu initialization","description":"The music selection menu in Focus Mode is empty on startup and only populates after interacting with Settings. It should populate immediately. Also verify it remains hidden in Normal Mode.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T02:44:50.2290787+07:00","updated_at":"2025-12-17T02:46:17.5711194+07:00","closed_at":"2025-12-17T02:46:17.5711194+07:00","close_reason":"Added populateMusicList() call to onload() to ensure dropdown is initialized on startup. Added safety check in DataManager.load() to ensure playlist is always an array."}
{"id":"gemmy-y8k","title":"Add Focus Mode toggle button","description":"Add a toggle button for Focus Mode to the left of the favourite mode button.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-16T15:39:07.4871051+07:00","updated_at":"2025-12-16T15:40:59.9893087+07:00","closed_at":"2025-12-16T15:40:59.9893087+07:00","close_reason":"Added Focus Mode toggle button to the left of the favourite mode button"}
{"id":"gemmy-y9o","title":"Remove dead code (HistoryModal \u0026 CSS)","description":"Remove unused HistoryModal class from main.ts and unused CSS classes (.gemmy-history-list) from styles.css.","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-15T19:36:53.0590185+07:00","updated_at":"2025-12-15T19:39:23.7924837+07:00","closed_at":"2025-12-15T19:39:23.7924837+07:00","close_reason":"Removed dead code: HistoryModal in main.ts and unused CSS classes."}
{"id":"gemmy-ysj","title":"Reorganize Gemmy Menu and add View Favorites","description":"Reorganize the menu items into logical groups (Interaction, Data, System) and add the 'View Favorite Quotes' option.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T20:21:48.2496943+07:00","updated_at":"2025-12-15T20:21:58.2856976+07:00","closed_at":"2025-12-15T20:21:58.2856976+07:00","close_reason":"Completed"}
{"id":"gemmy-yte","title":"Implement Focus Mode with Custom Music","description":"Allow user to trigger a focus mode that plays a specific music track designated by the user.","design":"Source: YouTube URL. Approach: Trigger via command. Needs investigation on how to play audio/video from CLI (browser vs streaming).","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-16T16:24:43.8033852+07:00","updated_at":"2025-12-16T16:28:16.9463148+07:00","closed_at":"2025-12-16T16:28:16.9463148+07:00","close_reason":"Implemented focus music via window.open with URL from settings."}
{"id":"gemmy-z9z","title":"Add Music Dropdown Selector to Focus Mode UI","description":"Add a dropdown menu (select element) to the Focus Mode bubble UI. It should be positioned between the Pomodoro timer and the Volume slider. It populates from the user's playlist and allows switching tracks instantly.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T01:35:35.9286763+07:00","updated_at":"2025-12-17T01:36:30.6079953+07:00","closed_at":"2025-12-17T01:36:30.6079953+07:00","close_reason":"Added music dropdown selector to Focus Mode UI in main.ts"}
{"id":"gemmy-zaz","title":"Feature: Random 35s Segment Radio Logic","description":"Triển khai logic phát nhạc kiểu 'Radio': chọn một đoạn 35 giây ngẫu nhiên của một bài hát ngẫu nhiên, sau đó tự động chuyển bài.","design":"1. Lấy tổng thời lượng video qua getDuration().\\n2. Tính toán startTime = Math.random() * (duration - 35).\\n3. Gọi player.seekTo(startTime) và phát nhạc.\\n4. Dùng setTimeout(35000) để đếm ngược.\\n5. Khi hết giờ, tự động gọi playRandomMusic() để bắt đầu vòng lặp mới.","acceptance_criteria":"- [ ] Nhạc bắt đầu tại một thời điểm ngẫu nhiên.\\n- [ ] Mỗi đoạn nhạc phát đúng 35 giây.\\n- [ ] Tự động chuyển bài sau 35 giây.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-19T21:42:41.2372041+07:00","updated_at":"2025-12-19T21:54:06.4157299+07:00","closed_at":"2025-12-19T21:54:06.4157299+07:00","close_reason":"Implemented Toggle Gemmy command, Music Seek Bar, and Random 35s Segment Radio logic. All features are integrated and styled.","dependencies":[{"issue_id":"gemmy-zaz","depends_on_id":"gemmy-4pg","type":"parent-child","created_at":"2025-12-19T21:42:48.8722487+07:00","created_by":"daemon"}]}
